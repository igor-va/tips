# Links
https://habr.com/ru/post/122445/

# ssh
ssh-keygen  # Утилита для генерации ключей. По умолчанию сохраняет ключи в ~/.ssh/
	    # Генерирует публичный и приватный ключ
	    # Публичный с расширением .pub (например id_rsa.pub)
	    # Приватный ключ никогда нельзя никомупоказывать (например id_rsa)
	    # Ключи всегда должны быть защищены паролем
	    
# Основные типы ключей
ssh-keygen -t rsa -b 4096
ssh-keygen -t dsa
ssh-keygen -t ecdsa -b 521
ssh-keygen -t ed25519

# Авторизация ключа на сервере
~/.ssh/authorized_keys

# Добавить свой публичный ключ на сервер
ssh-copy-id user@server

# Ключи серверов сохраняются в 
~/.ssh/known_hosts

# Возможные проблемы:
Сервер перенакатили -- ip тот же, ключ другой.
Несколько серверов с одинаковым ip, но разными ключами
Вас хакнули

В файл ~/.ssh/config можно добавить алисы для использования вместо адреса сервера.
Host ric
	Hostname ооо-рога-и-копыта.рф
	User Администратор
	ForwardX11 yes
	Compression yes
Host home
	Hostname myhome.dyndns.org
	User vasya
	PasswordAuthentication no
	
# Использование для удаленного управления
ssh [username@]ip/domain  # Подключиться к удаленному серверу
-c  # Уазать протокол шифрования
-p  # Указать порт (по умолчанию 22)
ssh -Q kex  # список доступных алгоритмов обмена ключами
ssh -Q cipher  # список доступных алгоритмов шифрования канала
ssh -Q key-cert  # список доступных типов ключей

# Исполнит одну команду на удаленном сервере
ssh user@server ls /etc/
ssh user@server -t remove_command

Использование для копирования файлов:
scp path/myfile user@8.8.8.8:/full/path/to/new/location/  # скопировать файл на тачку
scp user@8.8.8.8:/full/path/to/file /path/to/put/here  # скопировать файл с тачки
-r  # скопировать каталог

# Использование для прокси / туннелирования:
ssh -D 8080 user@server  # socks-proxy
ssh -R 127.1:80:8.8.8.8:8080 user@8.8.8.8  # перенаправлять запросы с удаленного сервера на свой
ssh -L 192.168.0.2:8080:10.1.1.1:80 user@8.8.8.8  # перенаправлять запросы с локального сервера на удаленный
ssh -A user@8.8.8.8 ssh user2@10.1.1.2  # пробрасывать авторизацию

# SSH сервер
Установить из пакетного менеджера (apt, yum, apk, etc)
Если нужно что-то настроить /etc/ssh/sshd_config (например, поменять порт)
Сделать systemctl restart sshd или service sshd restart
Не открывайте 22 порт в интернет





















